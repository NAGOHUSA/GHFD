// In the DOMContentLoaded event listener:
document.addEventListener('DOMContentLoaded', function() {
    initializeSliders();
    initializeCountySelect();  // Add this
    initializeInvestorSelect(); // Add this
    loadData();
    
    // Auto-refresh every 5 minutes
    setInterval(loadData, 300000);
});

// Update the loadData function to call populateCountySelect:
async function loadData() {
    showLoading(true);
    
    try {
        if (dataSource === 'real') {
            // Your existing data loading code...
        } else {
            currentData = generateDemoData();
        }
        
        // Apply filters and update dashboard
        filterData();
        updateDashboard();
        
    } catch (error) {
        console.error('Error loading data:', error);
        
        // Fall back to demo data
        document.getElementById('statusAlert').className = 'alert alert-warning';
        document.getElementById('statusMessage').textContent = 
            'Live data not available. Showing demo data instead.';
        
        currentData = generateDemoData();
        filterData();
        updateDashboard();
    } finally {
        showLoading(false);
    }
}
